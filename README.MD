# IOTA SDK

![Dashboard](images/showcase.jpg)

## ğŸ”— Links

- [Discord Community](https://discord.gg/zKeTEZAQqF): Join our community for support and Q&A
- [Contribution Guide](docs/CONTRIBUTING.MD): Learn how to contribute to the project
- [Developer Rules (SSOT)](AGENTS.md): Local checks, workflows, and doc gates
- [Multi-worktree local Docker isolation](docs/dev-plans/011B-worktree-local-dev-docker-isolation.md): Avoid port/volume conflicts
- [Setup Demo](https://github.com/iota-uz/sdk-demo): Learn how to setup IOTA-SDK
- [Demo stand](https://demo.iotaerp.com): Explore the SDK UI
- [Docker hub](https://hub.docker.com/r/iotauz/sdk) - Official Docker images
- [Roadmap (Coming soon...)](docs/): Explore our upcoming features and milestones
- [Figma Designs (Coming soon...)](https://www.figma.com/): Access and contribute to our open-source designs

## ğŸ›  Built With

- [Go](https://go.dev): A statically typed, compiled programming language designed for high performance.
- [htmx](https://htmx.org): Enables modern interactivity with minimal JavaScript.
- [Alpine.js](https://alpinejs.dev): A lightweight JavaScript framework for reactive components.
- [Templ](https://templ.sh): A powerful templating system for building server-rendered web applications.

## âš™ï¸ Prerequisites

- Go 1.24.10+
- Node.js 20+ (for tooling like Playwright/Tailwind)
- PostgreSQL 17 (local `docker compose` files run `postgres:17` to mirror CI)

## âœ… Quality Gates

- `quality-gates` workflow enforces formatting, linting, tests, template regeneration, locale checks, and PostgreSQL 17 migration smoke tests.
- Run the matching local commands before pushing: see [Contribution Guide](docs/CONTRIBUTING.MD) and `AGENTS.md`.

## ğŸ” Authz

- ç­–ç•¥è‰ç¨¿ APIï¼š`docs/runbooks/authz-policy-draft-api.md`
- Bot æµç¨‹ä¸åº”æ€¥ï¼š`docs/runbooks/AUTHZ-BOT.md`

## ğŸ§© Personï¼ˆäººå‘˜ï¼‰

- sqlc å·¥ä½œæµï¼š`docs/runbooks/person-sqlc.md`
- Atlas + Gooseï¼š`docs/runbooks/person-atlas-goose.md`

## ğŸ˜ PostgreSQL 17ï¼ˆæœ¬åœ°ï¼‰

- è¿ç§»ä¸å¤‡ä»½ï¼š`docs/runbooks/postgres17-migration.md`

---  

## A Modular and Configurable ERP Solution

**IOTA SDK** is an open-source, modular, and feature-complete **ERP system** designed to adapt to multiple operational
domains (e.g. core hr, internal tooling, and platform operations). Inspired by leading platforms like
Odoo, IOTA SDK provides an intuitive framework to accelerate enterprise operations and unlock efficiency with powerful
tools and integrations.

---  

## ğŸš€ Key Features

- **Configurable Architecture**: Fully modular components to customize workflows.
- **Modular Business Apps**: Person/Org, BIâ€‘Chat, logging, and more.
- **GraphQL API**: Simplifies querying and data management.
- **Open Source**: Fully extensible and transparent.

---  

## ğŸ“… Roadmap

We have an ambitious roadmap to enhance IOTA SDK's capabilities and provide a robust framework for ERP needs across
various industries. Here's what's in the pipeline:

### Core Modules

- **Finance & Accounting**: Develop comprehensive tools for managing financial operations, including general ledger,
  accounts payable/receivable, and payroll.

### Work In Progress

- **CRM**: Building a customer relationship management module to streamline client interactions and sales processes.
- **BIâ€‘Chat**: Introducing a business intelligence chatbot for real-time data insights and reporting.

### Upcoming Features

- **Core HR**: Expand People/Org capabilities for onboarding, payroll, and benefits.
- **Password Vault**: Securely store and manage sensitive credentials within the platform.
- **DSL**: Integrate V8/Python for scripting and customizations.
- **Logging**: Implement a logging system for tracking user actions and system events.
- **Invoice and Document Generation**: Leverage [GOBL](https://github.com/invopop/gobl) for generating and managing
  invoices and other essential business documents.
- **Documentation Website**: Launch a comprehensive docs website to streamline onboarding and provide detailed guidance
  for developers and users.
- **Open Source Designs and Documentation**: Share Figma designs and other internal documentation to help the community
  understand the vision and contribute more effectively.

---  

## ğŸ› ï¸ Developer Tools

### DevHub CLI

DevHub is a powerful Terminal User Interface (TUI) for managing development services. It provides centralized control over all your project's services from a single interface.

**Installation:**
```bash
go install github.com/iota-uz/devhub/cmd/devhub@latest
```

Learn more in the [DevHub documentation](https://github.com/iota-uz/devhub).

---

## ğŸ§© Personï¼ˆäººå‘˜ï¼‰sqlc å·¥ä½œæµ

`modules/person` çš„ SQL ç°å·²ç»Ÿä¸€ä½¿ç”¨ sqlc ç”Ÿæˆã€‚ä¿®æ”¹ Person è¡¨ç»“æ„æˆ– SQL æ—¶è¯·éµå¾ªä»¥ä¸‹é¡ºåºï¼š

1. ç»´æŠ¤è¿ç§»æˆ– schemaï¼ˆä»¥ `modules/person/infrastructure/persistence/schema/person-schema.sql` ä¸ºå‡†ï¼‰ã€‚
2. è¿è¡Œ `scripts/db/export_person_schema.sh` å¯¼å‡ºæœ€æ–° schemaï¼ˆå¯é€šè¿‡ `SKIP_MIGRATE=1` è·³è¿‡è‡ªåŠ¨è¿ç§»ï¼‰ã€‚
3. æ‰§è¡Œ `make sqlc-generate`ï¼ˆæˆ– `make generate`ï¼Œå®ƒä¼šè‡ªåŠ¨è°ƒç”¨è¯¥ç›®æ ‡ï¼‰ä»¥é‡å»º `modules/person/infrastructure/sqlc/**`ã€‚
4. `git status --short` ç¡®è®¤æ²¡æœ‰é—æ¼çš„ç”Ÿæˆæ–‡ä»¶ï¼Œå†æäº¤ PRã€‚

CI ä¸­çš„ `person-sqlc` è¿‡æ»¤å™¨ä¼šåœ¨æ¶‰åŠ Person SQL / schema / sqlc.yaml å˜æ›´æ—¶å¼ºåˆ¶æ‰§è¡Œä¸Šè¿°æµç¨‹ï¼Œå¹¶æ‹’ç»åŒ…å«æœªæäº¤ç”Ÿæˆç»“æœçš„ PRã€‚

---

## ğŸ§­ Personï¼ˆäººå‘˜ï¼‰Atlas + Goose æµæ°´çº¿

Person ä½¿ç”¨ Atlas åš plan/lintï¼ˆè´¨é‡é—¨ç¦ï¼‰ï¼Œä½¿ç”¨ goose æ‰§è¡Œè¿ç§»ï¼ˆ`migrations/person/*.sql`ï¼Œgoose æ ¼å¼ï¼‰ã€‚åŸºçº¿äº§ç‰©ï¼š

- Atlas é…ç½®ï¼šæ ¹ç›®å½• `atlas.hcl`ï¼ˆä»ç¯å¢ƒå˜é‡ `DB_URL` / `ATLAS_DEV_URL` è¯»å–è¿æ¥ä¸²ï¼‰
- Schema sourceï¼š
  - `modules/person/infrastructure/atlas/core_deps.sql`ï¼ˆPerson å¤–é”®ä¾èµ–çš„æœ€å° Core stubï¼‰
  - `modules/person/infrastructure/persistence/schema/person-schema.sql`ï¼ˆPerson ç›®æ ‡ç»“æ„ï¼‰
- è¿ç§»ç›®å½•ï¼š`migrations/person/*.sql`ï¼ˆgoose æ ¼å¼ï¼Œæ–‡ä»¶åå‰ç¼€ä¸ºæ•°å­—ç‰ˆæœ¬å·ï¼‰
- å·¥ä½œæ—¥å¿—ï¼š`docs/dev-records/DEV-PLAN-061-READINESS.md`

æ¨èæµç¨‹ï¼š

1. **å®‰è£… Atlas CLIï¼ˆä¸€æ¬¡æ€§ï¼‰**
   ```bash
   make atlas-install   # ä» GitHub æ„å»º atlas v0.38.0 å¹¶å®‰è£…åˆ° $(go env GOPATH)/bin
   ```
2. **å®‰è£… goose CLIï¼ˆä¸€æ¬¡æ€§ï¼‰**
   ```bash
   make goose-install   # å®‰è£… goose v3.26.0 åˆ° $(go env GOPATH)/bin
   ```
3. **æ›´æ–° schema å®šä¹‰**ï¼šæ›´æ–° Person schema SQLï¼ˆ`modules/person/infrastructure/persistence/schema/person-schema.sql`ï¼‰ï¼Œå¦‚æ¶‰åŠå¤–é”®ä¾èµ–åŒæ­¥æ›´æ–° `modules/person/infrastructure/atlas/core_deps.sql`ã€‚
3. **Dry-run è®¡åˆ’**ï¼š
   ```bash
   # å»ºè®®ä½¿ç”¨ç‹¬ç«‹çš„ target/dev DBï¼Œé¿å…ä¸ä¸šåŠ¡åº“/æµ‹è¯•åº“äº’ç›¸æ±¡æŸ“
   DB_NAME=iota_erp_person_atlas ATLAS_DEV_DB_NAME=person_dev make db plan
   ```
   è¯¥å‘½ä»¤ä¼šè¿æ¥ Postgres å¹¶æ‰“å° SQL è®¡åˆ’ï¼ˆstdoutï¼‰ï¼Œä¸å†™å…¥ç£ç›˜ã€‚
4. **åº”ç”¨è¿ç§»ï¼ˆgooseï¼‰**ï¼š
   ```bash
   DB_NAME=iota_erp_person_atlas PERSON_MIGRATIONS=1 make db migrate up
   ```
   å½“ `PERSON_MIGRATIONS=1` æ—¶ï¼Œ`Makefile` ä¼šè°ƒç”¨ `scripts/db/run_goose.sh`ï¼Œä½¿ç”¨ `postgres://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:${DB_PORT}/${DB_NAME}` ä½œä¸º DSNã€‚  
   - å›æ»šæœ€è¿‘ä¸€æ¬¡ï¼š`GOOSE_STEPS=1 PERSON_MIGRATIONS=1 make db migrate down`  
   - redoï¼š`GOOSE_STEPS=1 PERSON_MIGRATIONS=1 make db migrate redo`  
   - çŠ¶æ€ï¼š`PERSON_MIGRATIONS=1 make db migrate status`
5. **å¯¼å‡º schema & é‡å»º sqlc**ï¼š
   ```bash
   scripts/db/export_person_schema.sh SKIP_MIGRATE=1
   make sqlc-generate
   ```
6. **æäº¤å‰æ£€æŸ¥**ï¼š
   ```bash
   DB_NAME=iota_erp_person_atlas ATLAS_DEV_DB_NAME=person_dev make db lint
   ```
   `make db lint` ä¼šè¿è¡Œ `atlas migrate lint --env ci --git-base origin/main`ï¼Œç¡®ä¿ç¼ºå¤±è¿ç§» / hash æ¼‚ç§»ä¼šè¢«é˜»æ­¢ã€‚

> æ‰€æœ‰ Atlas/Goose æ“ä½œè¯·åœ¨å¯¹åº” Dev-Plan çš„ readiness è®°å½•è¡¥å……å‘½ä»¤ä¸ç»“æœï¼Œæ–¹ä¾¿åç»­å®¡è®¡å’Œå›æº¯ã€‚

---

## ğŸ” Super Admin

IOTA SDK includes a separate Super Admin server for managing tenants and platform-wide operations. This deployment is isolated from the main application and requires super admin authentication for all routes.

**Key Features:**
- Separate deployment context (uses same environment variables)
- Only core + superadmin modules loaded (lightweight)
- Global authentication middleware enforcing super admin access
- Tenant management and platform analytics

**Quick Start:**
```bash
# Build Super Admin server
docker build -f Dockerfile.superadmin -t iota-sdk-superadmin .

# Run Super Admin server (uses same env vars as main app)
docker run -p 3000:3000 \
  -e DATABASE_URL=postgres://... \
  -e PORT=3000 \
  iota-sdk-superadmin
```

For detailed documentation, deployment guides, and authentication flow, see [Super Admin Documentation](docs/SUPERADMIN.md).

---

## ğŸ“„ Licence

Apache 2.0 

Updated at Jan 6, 2025

## ğŸŒŸ Join Us

<img width="250" style="display: block" src="https://cdn.prod.website-files.com/660549b5ac888804e6582845/6606afddd43da2d659209149_logo.svg">  

We welcome contributions to improve and expand IOTA SDK! Check out our [contributing guide](docs/CONTRIBUTING.MD) to get
started.
