# 050号文档：职位管理（Position）业务需求

**版本**：v0.1
**创建日期**：2025-12-19  
**状态**：草稿

---

## 1. 背景与目标

### 1.1 业务背景
- 职位（Position）是组织架构管理的关键延伸：代表组织中的**具体岗位实例**，可被员工填充并被用于编制与招聘管理。
- 与岗位定义（Job Profile）不同：Job Profile 描述职责模板；Position 是该模板在组织内的具体“席位/岗位实例”。

### 1.2 业务目标
- 支持职位在过去/现在/未来的**生效日期（effective dating）**管理与时间线追踪。
- 支持职位从创建、空缺、填充、停用、撤销等**全生命周期**管理。
- 职位必须归属于组织单元，并支持职位在组织间转移（保留历史）。
- 支持编制（FTE）管理与统计，适配“一岗多人”、兼职/派遣等场景。

---

## 2. 范围与非范围

### 2.1 范围（本次业务需求覆盖）
- 职位基本信息
- 职位状态（生命周期状态 + 填充状态）与流转
- 职位的生效日期与历史/未来版本管理（时间线语义）
- 变更治理（Update/Correct/Rescind/冻结窗口/reason code）
- 职位与组织单元的归属与转移
- 编制（FTE）容量、占用与统计
- 职位汇报关系（上级职位/下属职位）
- 职位限制（Position Restrictions）
- 审计与变更原因记录
- 权限与可见性（业务侧的能力边界）

### 2.2 非范围（本文明确不描述）
- 任意技术实现与架构细节（数据模型、接口协议、UI 复用、缓存/并发/幂等、测试方案等）
- 组织架构模块“如何复用”的技术细节（仅保留“职位必须归属组织单元”等业务事实）

---

## 3. 术语与核心概念

- **Position（职位）**：组织中的具体岗位实例，可被员工填充；用于编制、招聘与组织运营管理。
- **Job Profile（岗位定义）**：职责/能力的抽象模板；可与职位关联，用于说明职位职责模板或对接外部系统。
- **Assignment（任职）**：员工对职位的任职关系（包含任职起止日期、类型等）；用于解释“已填充/空缺”等状态与占编规则。
- **Effective Date（生效日期）**：某个职位状态/属性版本开始生效的日期。
- **As-of Date（按某日视角查询）**：以指定日期查看当时的职位状态与属性。
- **FTE（Full-Time Equivalent）**：编制单位，可为 0.5、1.0 等小数，用于表达兼职/派遣等占编比例。
- **Job Catalog（职位体系分类）**：四级分类：职类（Job Family Group）→ 职种（Job Family）→ 职务（Job Role）→ 职级（Job Level）。
- **生命周期状态（Lifecycle Status）**：职位“能否使用”的状态（计划/启用/停用/撤销等），随时间线版本生效。
- **填充状态（Staffing State）**：职位“占编/在任”的派生状态（空/部分填充/满编），按 as-of 视角计算。
- **Change Type（变更类型）**：对 effective dating 对象的变更方式（Update/Correct/Rescind/ShiftBoundary），影响审计强度与权限边界。
- **Reason Code（变更原因码）**：业务侧对变更原因的分类编码（创建、扩编、组织调整、停用、撤销、纠错等），用于审计、报表与治理。
- **冻结窗口（Freeze Window）**：对历史版本修改的时间治理策略；超过窗口的历史更正需更高权限或被禁止，并必须可审计追溯。

### 3.1 Job Profile 与 Job Catalog（职务/职级）的关系（对标 Workday）
> 本节用于澄清“岗位定义（Job Profile）”与“职务（Job Role）”是否重复：二者不重复，但需要明确绑定/校验关系，避免落地时形成两套并行主数据导致漂移。

- Job Catalog（职类/职种/职务/职级）用于分类、统计与权限/报表维度；回答“这是什么岗位类别/层级”。
- Job Profile 用于描述岗位职责模板/能力要求/外部对接；回答“这类岗位做什么、需要什么能力/模板”。
- **绑定关系（建议选定）**：每个 Job Profile 必须绑定一个 Job Role（可选绑定 Job Level），并可配置允许的 Job Level 集合；用于定义该 Job Profile 可落在哪些分类路径。
- Position 创建时 Job Catalog 四级必填；若同时选择 Job Profile，则必须满足“Job Profile 允许的分类路径”校验；不满足即视为冲突并拒绝（见 7.1）。
- UI/操作建议：选择 Job Profile 后默认带出 Job Catalog（至少到 Job Role），并仅允许在 Job Profile 的允许集合内调整。

---

## 4. 职位对象：业务数据要素与约束

### 4.1 必要信息（创建/版本变更时需可被业务表达）
- 职位名称/头衔（title）
- 职位编号/标识（code）
- 归属组织单元（organization）
- 职位体系分类（Job Catalog 四级：职类/职种/职务/职级）
- 生效日期（effective date）
- 职位类型（例如：正式/临时/合同/实习）
- 雇佣类型（例如：全职/兼职/实习/合同）
- 编制容量（capacity_fte，以 FTE 计）
- 变更原因（reason code + 说明）：至少覆盖创建、组织转移、停用、撤销、纠错等关键动作

### 4.2 可选信息（按业务需要补充）
- 成本中心（cost center）
- 岗位定义关联（Job Profile：用于职责模板/外部系统对接）
- 汇报关系：上级职位（reports-to），并可据此派生下属职位列表
- 人数上限（capacity_headcount，可选）：用于与 FTE 上限并存的场景（例如多人兼职合计 1.0 FTE，但人数受限）
- 扩展属性（profile）：用于承载额外的业务属性（不限定具体字段）

---

## 5. 状态模型与生命周期（业务语义）

> 对标 Workday：将“生命周期状态（能否使用）”与“填充状态（占编/在任）”拆分，避免在 `FTE>1` 与“一岗多人”场景下出现状态语义歧义。

### 5.1 生命周期状态（Lifecycle Status，随时间线版本生效）
- **PLANNED（计划中）**：未来生效的职位版本（例如扩编计划）。
- **ACTIVE（启用）**：当前已启用，允许招聘/任职/占编。
- **INACTIVE（停用）**：暂时停用但保留编制与历史（默认不可新增任职；在任处理见 7.6.1）。
- **DELETED（撤销/关闭）**：软删除语义，保留审计与历史追踪；默认业务视图不展示。

### 5.2 填充状态（Staffing State，按 as-of 视角派生）
- **EMPTY（空）**：当日 `occupied_fte = 0`。
- **PARTIALLY_FILLED（部分填充）**：当日 `0 < occupied_fte < capacity_fte`。
- **FILLED（满编/已填满）**：当日 `occupied_fte = capacity_fte`（系统必须阻止 `occupied_fte > capacity_fte`）。

> 说明：传统“VACANT（空缺）”建议作为标签：当日为空（EMPTY），且历史上存在任职记录时标记为 VACANT，用于 vacancy 分析与招聘看板。

### 5.3 创建时的初始状态
- 生效日期为“当前或过去”时：生命周期状态初始为 **ACTIVE**；填充状态初始为 **EMPTY**。
- 生效日期为“未来”时：生命周期状态初始为 **PLANNED**；填充状态初始为 **EMPTY**。

### 5.4 生命周期操作矩阵
> 业务侧需明确允许/禁止的操作组合；系统应阻止非法转换，并明确提示当前状态与允许操作。

| 当前生命周期状态 | 业务操作 | 目标生命周期状态 | 业务说明 |
|---|---|---|---|
| PLANNED | 启用 | ACTIVE / PLANNED | 到达生效日期前可保持计划；到达生效日期后可启用 |
| PLANNED | 撤销 | DELETED | 取消计划职位/版本 |
| ACTIVE | 停用 | INACTIVE | 暂停该席位使用（在任处理见 7.6.1） |
| ACTIVE | 撤销 | DELETED | 撤销职位（需满足撤销前置检查） |
| INACTIVE | 启用 | ACTIVE / PLANNED | 可立即启用或设置未来生效后启用 |
| INACTIVE | 撤销 | DELETED | 撤销停用职位 |
| 任意非 DELETED | 组织转移 | 同状态 | 转移只改变组织归属，不改变生命周期状态（但会影响统计维度） |

### 5.5 填充/占编操作矩阵（摘要）
| 当前填充状态 | 业务操作 | 目标填充状态 | 业务说明 |
|---|---|---|---|
| EMPTY | 新增任职/占用 FTE | PARTIALLY_FILLED / FILLED | 按占用 FTE 变化派生状态 |
| PARTIALLY_FILLED | 新增任职/占用 FTE | PARTIALLY_FILLED / FILLED | 系统必须阻止超编 |
| FILLED | 结束任职/释放 FTE | PARTIALLY_FILLED / EMPTY | 当日变为空时可被标记为 VACANT |
| 任意 | 调整占用 FTE | 重新派生 | 允许 1.0/0.5 等小数占用（规则见 7.3） |

---

## 6. 生效日期与时间线（业务语义）

### 6.1 时间线能力要求
- 对同一职位，系统需支持维护一条按生效日期排列的版本时间线，覆盖过去/现在/未来。
- 业务可在“某个日期视角（as-of）”查看当日的职位状态、组织归属、分类与编制等关键属性。
- 业务可查看职位的变更历史（包括每次变更的原因与操作者信息）。

### 6.2 生效日期冲突与重叠约束
- 同一职位在同一生效日期不应出现多个互相冲突的版本。
- 不应出现“有效区间重叠、断档导致语义不清”的时间线；如业务确需修订历史，应以“可追溯审计”的方式进行更正。

### 6.3 删除（撤销）对时间线的影响
- 撤销职位后，历史版本与审计仍应可追溯；但对“当前有效职位/可用席位”的业务视图中，应排除已撤销职位。

### 6.4 变更类型与治理（对标 Workday Effective Dating）
- **Update（新增版本）**：以新的生效日期创建一个新版本，用于组织转移、扩编、调整分类/成本中心等“业务变化”。
- **Correct（更正）**：对既有版本做原位更正（不改变有效区间），用于修正历史录入错误；必须强化审计与权限控制。
- **Rescind（撤销）**：撤销误创建的职位/版本（软删除语义）；必须保留可追溯审计。
- **ShiftBoundary（边界调整，选配）**：调整相邻版本的生效边界，用于纠正生效日期边界错误；必须保证无重叠/无断档且可审计。

### 6.5 冻结窗口（Freeze Window，强治理）
- 系统需支持“历史修改冻结窗口”策略：对早于 cutoff 的历史版本，默认禁止或要求更高权限。
- 冻结窗口建议具备三种模式（便于灰度与治理落地）：
  - `disabled`：不限制
  - `shadow`：不阻断，但记录审计告警/治理事件
  - `enforce`：强制阻断
- 冻结窗口策略需支持租户级配置（例如：按月结算 + 宽限期），并在错误提示中明确“被冻结的时间范围与原因”。

---

## 7. 核心业务规则（按场景）

### 7.1 职位创建
- 职位必须归属于**有效且可用**的组织单元（组织需处于可用状态，且职位生效日期应落在组织的有效期内）。
- 职位创建/变更时必须指定职位体系分类（四级），且分类必须处于启用状态；分类层级关系必须自洽（例如职务必须归属某职种，职级必须归属某职务）。
- 如岗位定义（Job Profile）与职位体系分类存在业务冲突，应拒绝创建/变更，并给出明确原因（例如 Job Profile 绑定的职务/职级不包含所选 Job Catalog 路径）。

### 7.2 职位填充（任职）与空缺
- 填充：新增任职并占用相应 FTE，填充状态派生为 **PARTIALLY_FILLED** 或 **FILLED**。
- 释放：当员工离职/调岗等导致不再任职时，释放相应占编；当日 `occupied_fte=0` 时填充状态派生为 **EMPTY**，且可按规则标记 **VACANT**（历史空缺）。

### 7.3 编制（FTE）规则
- 编制容量以 `capacity_fte` 表达，允许设置为 `0..N`：
  - `0` 表示“冻结/不可用席位”（保留流程与记录，但不可新增占编/不可填充）。
  - `>1` 支持“一岗多人”（例如保洁员职位容量 8 FTE，对应 8 FTE 可用编制）。
- 如业务同时需要“人数上限”，可引入 `capacity_headcount`（见 4.2），并在规则中同时阻止“人数超上限”与“FTE 超上限”。
- 填充/释放时支持按实际占用/释放的 FTE 进行增减（默认 1.0，允许 0.5 等小数），并要求：
  - `occupied_fte` 的变更必须可审计追溯（含 reason code）。
  - `occupied_fte` 不得为负数。
- 系统必须阻止超编：新增占用后不得超过 `capacity_fte`（以及可选的 `capacity_headcount`），并需向业务明确提示“超出上限”的原因与当前口径（FTE/人数）。

### 7.4 职位转移（跨组织）
- 职位允许在组织单元之间转移，转移需要指定生效日期与业务原因。
- 转移后应保留原组织归属的历史记录，支持按日期追溯。

### 7.5 汇报关系（上级职位）
- 职位可配置上级职位（reports-to），用于形成职位层级与下属职位视图。
- 系统需阻止形成循环汇报关系（避免“自己汇报给自己”或闭环）。

### 7.6 停用与撤销
- 停用：将职位置为不可用但保留编制与历史，用于临时冻结或业务暂停。
- 撤销：软删除语义，保留审计与历史追踪。
- 撤销前置检查（至少需覆盖）：
  - 是否存在下属职位（组织结构意义上仍在使用）
  - 是否存在任职记录（在任/历史任职的治理要求由业务确认）

#### 7.6.1 停用时的在任处理策略（需业务明确）
> 对标 Workday：停用/冻结/关闭往往与“在任人员处理”强绑定；若不先定策略，后续会在统计、权限与流程上产生漂移。

- 系统必须在“停用”动作中明确并一致执行以下策略之一（建议默认采用更安全的阻断策略）：
  - **策略 A（推荐默认）**：当 `occupied_fte > 0` 时禁止停用，提示需先结束/转移任职并释放占编。
  - **策略 B**：允许停用，但仅禁止“新增任职/新增占编”，允许现有任职自然结束；报表需能区分“停用但仍有在任占用”的异常态。
- 无论采用哪种策略，停用与撤销都必须强制记录 reason code，并可在审计中串联操作者、时间与影响范围。

### 7.7 职位限制（Position Restrictions，对标 Workday，建议纳入范围）
- 职位可配置“任职/招聘限制条件”，至少支持以下维度（按业务裁剪）：
  - 允许的雇佣类型/用工类型（全职/兼职/合同/实习等）
  - 允许的 Job Profile / Job Catalog（或其子集）
  - 工作地点/工作地类型（如适用）
  - 成本中心/预算口径（如适用）
- 系统在新增任职（以及后续招聘联动）时，必须校验限制条件并给出明确的拒绝原因。

### 7.8 字段可变性（建议口径，避免“改职位=隐式改员工”）
| 字段/能力 | Update（新增版本） | Correct（原位更正） | 在任（occupied_fte>0）时的额外约束 |
|---|---|---|---|
| 标题/描述/扩展属性 | 允许 | 允许 | 无 |
| 编制容量（capacity_fte） | 允许 | 允许（需强审计） | 下调不得低于 `occupied_fte`；禁止导致超编或“负可用” |
| 组织归属（转移） | 允许（组织转移） | 不建议 | 需明确任职归属/统计口径是否随职位转移；必须可追溯 |
| 汇报关系（reports-to） | 允许 | 允许（需校验） | 必须阻止形成循环汇报；变更需考虑组织/职位层级一致性 |
| 分类/岗位定义（Job Catalog/Job Profile） | 允许 | 限制（需强权限） | 需明确是否允许回溯影响（薪酬/权限/报表），并给出前置检查与提示 |
| 生命周期操作（停用/撤销） | 允许 | N/A | 停用在任策略见 7.6.1；撤销需前置检查并强审计 |

---

## 8. 查询、看板与报表需求

### 8.1 职位查询
- 支持查询单个职位（可指定按某日视角查看）。
- 支持职位列表查询与分页，并支持按以下维度过滤/检索：
  - 组织单元（可选包含下级组织范围）
  - 生命周期状态（计划/启用/停用/撤销）
  - 填充状态（空/部分填充/满编）与 VACANT 标签（历史空缺）
  - 职位类型、雇佣类型
  - 职位体系分类（四级任意维度）
  - 是否有在任占用（`occupied_fte > 0`）
  - 关键词搜索（例如职位名称/编号）

### 8.2 时间线与历史追踪
- 可按时间范围查看职位时间线（每个版本需展示：生效日期、终止日期、状态、变更原因、变更人/变更时间）。

### 8.3 编制统计（Headcount）
- 支持按组织统计编制容量、已占用、可用与填充率，至少覆盖 FTE 口径（可选同时支持人数口径）。
- 支持按职级、职位类型等维度拆分统计（至少包含“按职级”“按类型”）。
- 统计范围需支持“仅本组织”与“包含下级组织”的口径选择。

### 8.4 空缺分析（建议增强）
- 支持 vacancy aging（空缺时长）与填补效率指标（如 time-to-fill 的基础口径），用于对标 Workday 的 vacancy/招聘看板。

---

## 9. 权限与可见性（业务能力边界）

> 本节仅描述业务能力拆分，具体权限模型以系统统一权限体系落地为准。

- 读取职位信息
- 创建/更新职位（含计划职位）
- 执行生命周期操作：激活、填充、空缺、停用、转移、撤销
- 读取历史/未来生效信息
- 修改历史版本（Correct/ShiftBoundary，强治理能力，需严格授权）
- 读取编制统计与分析报表
- 维护职位体系分类主数据（Job Catalog）
- 维护冻结窗口策略与 reason code（强治理能力，需严格授权）
- 维护职位限制（Position Restrictions）

---

## 10. 任职管理（后续扩展需求，供排期）

> 任职管理与招聘联动建议作为后续阶段扩展；此处仅保留业务侧需要被满足的能力清单。

- 任职为“有起止日期的事件周期”，需支持历史/当前/未来计划任职。
- 同一员工可在同一职位出现多次任职（多段任职事件），用于统计空缺周期与任职历史。
- 允许更正历史任职信息（例如入职日期修订），但必须保留可追溯的审计记录。
- 任职类型需支持至少：主任职/兼任/代理（具体政策与规则由业务确认）。

---

## 11. 待确认决策点（对标 Workday，建议业务签字）
- `INACTIVE`（停用）与 `capacity_fte=0`（冻结席位）在业务语义上的边界：是否二者并存，及其对招聘/任职/统计的影响。
- 停用在任策略：是否允许“停用但仍在任”（见 7.6.1 策略 A/B 的选择）。
- 是否引入 `capacity_headcount` 与并行口径（FTE vs 人数），以及报表展示优先级。
- Job Catalog/Job Profile 的关系与治理边界：采用“Job Profile 绑定 Job Role（可选 Job Level 集合）”的映射并作为冲突校验 SSOT；在任时是否允许更改分类/岗位定义，以及是否影响薪酬/权限/报表的回溯口径。
- 冻结窗口默认策略（cutoff 口径、宽限期、`disabled/shadow/enforce` 的默认值）与“强治理权限”的授予范围。
- reason code 的枚举治理：最小必需集合、是否允许租户自定义、以及对审计/报表的汇总口径。
